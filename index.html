<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr. Rahul Kumar Thakur - PhD Scholar & Quantitative Researcher</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .section-title {
            @apply text-3xl font-bold text-center mb-12 text-gray-800;
        }
        .card {
            @apply bg-white rounded-xl shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105;
        }
        .nav-link {
            @apply px-3 py-2 text-gray-700 hover:text-blue-600 font-medium rounded-md transition-colors duration-300;
        }
        .nav-link-active {
            @apply text-blue-600 bg-blue-50 rounded-md;
        }
        html {
            scroll-behavior: smooth;
        }
        /* Custom scrollbar for a cleaner look - optional */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        #ai-summary-modal {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-700">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-blue-600">Mr. Rahul Kumar Thakur</a>
            <div class="space-x-1 md:space-x-2">
                <a href="#home" class="nav-link nav-link-active">Home</a>
                <a href="#about" class="nav-link">About</a>
                <a href="#research" class="nav-link">Research</a>
                <a href="#workshops" class="nav-link">Workshops</a>
                <a href="#collaborate" class="nav-link">Collaborate</a>
            </div>
        </nav>
    </header>

    <!-- Home Section -->
    <section id="home" class="py-20 bg-gradient-to-br from-blue-600 to-indigo-700 text-white">
        <div class="container mx-auto px-6 text-center">
            <img src="images/QVZqMEV5Y0ZLbjZ5OVJlSEQwbFAyZVY1.jpeg" alt="Mr. Rahul Kumar Thakur" class="w-36 h-36 md:w-48 md:h-48 rounded-full mx-auto mb-8 border-4 border-white shadow-xl" onerror="this.onerror=null; this.src='https://placehold.co/150x150/ffffff/3B82F6?text=RKT';">
            <h1 class="text-4xl md:text-6xl font-bold mb-4">Mr. Rahul Kumar Thakur</h1>
            <p class="text-xl md:text-2xl mb-2">PhD Scholar | Quantitative Researcher | Global Collaborator</p>
            <p class="text-lg md:text-xl max-w-3xl mx-auto mb-8">
                Bridging 12 years of quantitative industry expertise with cutting-edge academic research to drive innovation and solve complex global challenges.
            </p>
            <a href="#collaborate" class="bg-white text-blue-600 font-semibold px-8 py-3 rounded-lg shadow-md hover:bg-gray-100 transition-colors duration-300 text-lg">
                Let's Collaborate
            </a>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 md:py-24">
        <div class="container mx-auto px-6">
            <h2 class="section-title">About Me</h2>
            <div class="grid md:grid-cols-3 gap-8 items-center">
                <div class="md:col-span-1">
                     <img src="images/rahul-pic2.jpeg" alt="About Mr. Rahul Kumar Thakur" class="rounded-xl shadow-lg w-full" onerror="this.onerror=null; this.src='https://placehold.co/400x500/E0E7FF/3B82F6?text=About+RKT';">
                </div>
                <div class="md:col-span-2 space-y-6 text-lg">
                    <p>
                        I am a PhD Scholar with over 12 years of experience in the quantitative finance industry, where I have consistently integrated deep academic inquiry with real-world application in financial markets. My doctoral research centers on global macroeconomics and international finance, with a particular focus on understanding the complex dynamics of international capital flows and exchange rate movements within an increasingly fragmented geopolitical and economic landscape. I examine how monetary policy, interest rate volatility, and rising debt burdens interact to influence global financial stability and the allocation of cross-border capital. Central to this inquiry is the evolving role of safe haven assets, sovereign debt, and global bond markets in shaping the international monetary system. Additionally, I analyze the use and effectiveness of capital flow management policies during times of economic stress, exploring their interaction with broader macroeconomic and regulatory frameworks.
                    </p>
                    <p>
                        In my current role at UBS, I work as a Quantitative Analyst specializing in credit risk modeling. My responsibilities include developing and validating sovereign credit risk models that estimate Probability of Default (PD) and Loss Given Default (LGD), as well as Lombard haircut models that determine the lending value of multi-asset security classes. These models are essential for accurate risk measurement, capital allocation, and lending valuation across diverse portfolios.
                    </p>
                    <p>
                        Previously, I worked as a buy-side quantitative model developer and researcher, where my primary responsibilities involved building models and conducting macroeconomics-driven multi-asset investment research to support both strategic and tactical asset allocation decisions. These models synthesize macro-financial indicators to support systematic asset allocation and global macro risk assessment.
                    </p>
                    <p>
                        My professional expertise spans financial econometrics, algorithmic trading, risk management, and the design of large-scale, data-driven investment systems. I am passionate about bridging academic research with policy and practice, and I actively seek opportunities to collaborate with universities, research institutions, think tanks, and policy-making bodies worldwide. My goal is to contribute to the advancement of knowledge and practice at the intersection of international finance, macroeconomic policy, and quantitative modeling.
                    </p>
                    <a href="resume.html" class="inline-block bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-300">
    View My Online Resume
</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Areas of Expertise Section -->
    <section class="py-16 md:py-24 bg-gray-100">
        <div class="container mx-auto px-6">
            <h2 class="section-title">Areas of Expertise</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-8">
                <div class="bg-white p-6 rounded-xl shadow-md text-center hover:shadow-xl transition-shadow duration-300">
                    <svg class="w-12 h-12 text-blue-600 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                    <h3 class="text-xl font-semibold text-gray-800">Quantitative Modeling</h3>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md text-center hover:shadow-xl transition-shadow duration-300">
                    <svg class="w-12 h-12 text-blue-600 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    <h3 class="text-xl font-semibold text-gray-800">Financial Data Science</h3>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md text-center hover:shadow-xl transition-shadow duration-300">
                     <svg class="w-12 h-12 text-blue-600 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <h3 class="text-xl font-semibold text-gray-800">Risk Management</h3>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md text-center hover:shadow-xl transition-shadow duration-300">
                    <svg class="w-12 h-12 text-blue-600 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 9a9 9 0 000 18c4.97 0 9-4.03 9-9s-4.03-9-9-9z"></path></svg>
                    <h3 class="text-xl font-semibold text-gray-800">Global Economic Policy</h3>
                </div>
                </div>
        </div>
    </section>

    <!-- Research & Publications Section -->
    <section id="research" class="py-16 md:py-24 bg-gray-100">
        <div class="container mx-auto px-6">
            <h2 class="section-title">Research & Publications</h2>
            <div class="space-y-8">
                
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-xl font-semibold text-gray-800 mb-1">QuantumFeed: A High-Fidelity, Agent-Based Simulator for Analyzing Market Microstructure</h3>
                    <p class="text-sm text-gray-500 mb-2">
                        Working Paper (2025). 
                    </p>
                    <p class="text-gray-600 mb-3 publication-abstract">
                        This project introduces a novel, open-source simulator for high-frequency trading research. It combines a high-performance C++ matching engine with a flexible Python agent framework to model complex market dynamics with high fidelity. The paper details its distributed architecture, sophisticated data generation models, and validation against the stylized facts of financial markets. The work culminates in a successful replication of the 2010 Flash Crash, demonstrating its utility as a powerful digital laboratory.
                    </p>
                    <div class="flex items-center space-x-4 mt-4">
                        <a href="quantumfeed_report.html" target="_blank" class="text-blue-600 font-semibold hover:underline">Explore the Interactive Report &rarr;</a>
                        <button onclick="handleSummaryClick(this)" class="bg-indigo-100 text-indigo-700 font-semibold px-4 py-2 rounded-lg shadow-sm hover:bg-indigo-200 transition-colors duration-300">
                            ✨ Summarize for Layman
                        </button>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-xl font-semibold text-gray-800 mb-1">India's Challenge on Managing External Sectors with the Sterilization of Capital Flows</h3>
                    <p class="text-sm text-gray-500 mb-2">
                        Rahul Kumar (2015). 
                        <em class="italic">Transnational Corporations Review</em>, 
                        Volume 6, Issue 2, 147-170.
                    </p>
                    <p class="text-gray-600 mb-3 publication-abstract">
                        The integration of India with the global financial system has expose Indian economy's external sectors to a harsh reality of capital flows. Among the capital flows, many are a global unaccounted risk and uncertainties. Systematic study to understand real and nominal impact of the flows in the economy has not been much looked upon. The paper uses a model of Australian Open Economy used by LBP (Lal, Berry and Pant) to understand the significance of sterilized capital flows with respect to its absorption in the economy, contributing to economic growth in India. The paper also examines the extent to which the policy measures are a cushion to hedge on the stress and crisis.
                    </p>
                    <div class="flex items-center space-x-4 mt-4">
                        <a href="https://scholar.google.com/citations?view_op=view_citation&hl=en&user=8LwxXBQAAAAJ&citation_for_view=8LwxXBQAAAAJ:u5HHmVD_uO8C" target="_blank" class="text-blue-600 font-semibold hover:underline">View on Google Scholar &rarr;</a>
                        <button onclick="handleSummaryClick(this)" class="bg-indigo-100 text-indigo-700 font-semibold px-4 py-2 rounded-lg shadow-sm hover:bg-indigo-200 transition-colors duration-300">
                            ✨ Summarize for Layman
                        </button>
                    </div>
                </div>
                
            </div> <div class="text-center mt-12">
                <a href="https://scholar.google.com/citations?user=8LwxXBQAAAAJ&hl=en" class="bg-blue-600 text-white font-semibold px-8 py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-300">
                    View All Publications
                </a>
            </div>
        </div>
    </section>

    <!-- Workshops & Professional Development Section -->
    <section id="workshops" class="py-16 md:py-24">
        <div class="container mx-auto px-6">
            <h2 class="section-title">Workshops & Professional Development</h2>
            <div class="space-y-10">
                <ul class="space-y-8 list-disc list-inside text-gray-700">
                    <li>
                        Participated in the 6-day <strong>"Workshop on Open Economy Macroeconomics and Economic Integration in Emerging Market Economies"</strong>.
                        <br>
                        <span class="text-sm text-gray-600 ml-6">Organized by Centre for Development Studies (CDS) & Reserve Bank of India (RBI). (13-18 March 2025)</span>
                        <div class="pl-10 mt-2 space-y-1">
                            <p class="text-gray-700">Presented a paper titled: <em class="italic">“Bond Yields, Macroeconomic Variables, and Exchange Rates: A Dynamic Interaction for Price Stability.”</em></p>
                            <p class="text-sm text-gray-600 pl-4">- Exploring the Interrelationship Between Inflation, Economic Growth, and Exchange Rate Movements to Understand Long-Term Price Stability.</p>
                        </div>
                        <div class="mt-2 ml-6">
                            <a href="https://cds.edu/event/rbi-conference/" target="_blank" class="text-blue-600 hover:underline">[Workshop Details]</a>
                            <a href="files/BondYeildMacroREER_conference.pdf" target="_blank" class="text-blue-600 hover:underline ml-2">[View Paper]</a>
                            <a href="files/CDS_open_macroeconomy_certitificate.jpg" target="_blank" class="text-blue-600 hover:underline ml-2">[View Certificate]</a>
                        </div>
                    </li>
                    <li>
                        Participated in the Training Programme on <strong>“BIG Data Analysis Through Theory and Application”</strong>.
                        <br>
                        <span class="text-sm text-gray-600 ml-6">Organized by Centre for Development Studies (CDS), Thiruvananthapuram, India. (28 April 2025 – 02 May 2025)</span>
                        <div class="pl-10 mt-2">
                            <p class="text-gray-700">Presented a paper titled: <em class="italic">“Rare Earth Elements Scarcity under Trade Restrictions: An Econometric and Machine Learning Approach.”</em></p>
                        </div>
                        <div class="mt-2 ml-6">
                            <a href="https://cds.edu/events/training-programmes/bigdata/" target="_blank" class="text-blue-600 hover:underline">[Workshop Details]</a>
                            <a href="files/CDS_big_data_Presentation_final.pdf" target="_blank" class="text-blue-600 hover:underline ml-2">[View Presentation]</a>
                            <a href="files/big_data_certificate.jpg" target="_blank" class="text-blue-600 hover:underline ml-2">[View Certificate]</a>
                        </div>
                    </li>
                    <li>
                        Participated in the 5-Day Workshop on <strong>“Quantum Computing, Machine Learning (ML) and Artificial Intelligence (AI)”</strong>.
                        <br>
                        <span class="text-sm text-gray-600 ml-6">Organized by Department of Physics, School of Advanced Sciences (SAS), VIT-AP University, India. (20th May 2025 - 24th May 2025)</span>
                        <div class="mt-2 ml-6">
                           <a href="files/External Participations-61.pdf" target="_blank" class="text-blue-600 hover:underline">[View Certificate]</a>
                        </div>
                    </li>
                 </ul>
            </div>
        </div>
    </section>

    <!-- Collaboration & Contact Section -->
    <section id="collaborate" class="py-16 md:py-24 bg-blue-600 text-white">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl font-bold mb-6">Let's Connect & Collaborate</h2>
            <p class="text-lg max-w-2xl mx-auto mb-8">
                I am passionate about contributing to the field and welcome opportunities for joint research projects, guest lectures, workshops, advisory roles, and collaborations with academic institutions, research centers, universities, and government bodies worldwide. If you have an idea or project where my expertise can contribute, I'd love to hear from you.
            </p>
            <div class="mb-8">
                <a href="mailto:p20230517@hyderabad.bits-pilani.ac.in" class="text-xl hover:underline">p20230517@hyderabad.bits-pilani.ac.in</a>
            </div>
            <div class="flex justify-center space-x-6 mb-10">
                <a href="https://www.linkedin.com/in/rahulkumarrk/" target="_blank" class="hover:opacity-75 transition-opacity" aria-label="LinkedIn Profile">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" clip-rule="evenodd"/></svg>
                </a>
                <a href="https://x.com/rahulkumar_rkt" target="_blank" class="hover:opacity-75 transition-opacity" aria-label="Twitter Profile">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-.422.724-.665 1.56-.665 2.452 0 1.613.823 3.043 2.074 3.878-.765-.025-1.482-.233-2.11-.583v.06c0 2.254 1.603 4.134 3.732 4.562-.389.106-.803.163-1.233.163-.3 0-.592-.029-.875-.083.593 1.849 2.309 3.195 4.34 3.233-1.592 1.246-3.604 1.991-5.786 1.991-.376 0-.747-.022-1.112-.065 2.058 1.323 4.503 2.092 7.14 2.092 8.57 0 13.255-7.098 13.255-13.254 0-.202-.005-.403-.014-.603.91-.658 1.7-1.476 2.323-2.41z"/></svg>
                </a>
                <a href="https://scholar.google.com/citations?user=8LwxXBQAAAAJ&hl=en" target="_blank" class="hover:opacity-75 transition-opacity" aria-label="Google Scholar Profile">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5.242 12.091L12 16.178l6.758-4.087a.68.68 0 0 0 .242-.518V5.59a.68.68 0 0 0-1.133-.518L12 8.822l-5.867-3.75a.68.68 0 0 0-1.133.518v5.983a.68.68 0 0 0 .242.518zM12 17.609l-7.5-4.545V7.082L12 10.25v7.359zM12 3.91L0 9.97v8.06l12 6.06 12-6.06V9.97L12 3.91z"/></svg>
                </a>
                <a href="https://github.com/rahulkumareconomist/rahulkumareconomist" target="_blank" class="hover:opacity-75 transition-opacity" aria-label="GitHub Profile">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.026 2.747-1.026.546 1.379.201 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/></svg>
                </a>
            </div>
            <p class="text-indigo-200">Looking forward to connecting!</p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300 py-10 text-center">
        <div class="container mx-auto px-6">
            <p>&copy; <span id="currentYear"></span> Mr. Rahul Kumar Thakur. All Rights Reserved.</p>
            <p class="text-sm mt-1">Powered by GitHub Pages & Tailwind CSS.</p>
        </div>
    </footer>

    <!-- AI Summary Modal -->
    <div id="ai-summary-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-auto transform transition-all duration-300 scale-95 opacity-0" id="modal-panel">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                        <span class="text-indigo-500 mr-3">✨</span> AI-Generated Summary
                    </h3>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
                <div id="summary-content" class="text-gray-700 space-y-3 prose lg:prose-lg max-w-none">
                    <!-- Loading spinner will be shown here -->
                </div>
            </div>
        </div>
    </div>


    <script>
        // Set current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Smooth scroll for navigation links and active state
        const navLinks = document.querySelectorAll('nav a.nav-link');
        const sections = document.querySelectorAll('section');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 100) { // Adjust offset as needed
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('nav-link-active');
                if (link.getAttribute('href').substring(1) === current) {
                    link.classList.add('nav-link-active');
                }
            });
        });

        // --- Gemini AI Summary Feature ---

        const modal = document.getElementById('ai-summary-modal');
        const modalPanel = document.getElementById('modal-panel');
        const summaryContent = document.getElementById('summary-content');

        // Function to show the modal
        function showModal() {
            modal.style.display = 'flex';
            setTimeout(() => {
                modalPanel.classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        // Function to close the modal
        function closeModal() {
            modalPanel.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300); // Wait for transition to finish
        }

        // Close modal if backdrop is clicked
        modal.addEventListener('click', (event) => {
            if (event.target === modal) {
                closeModal();
            }
        });

        // Main function to handle the button click
        function handleSummaryClick(buttonElement) {
            const publicationCard = buttonElement.closest('.bg-white');
            const abstractElement = publicationCard.querySelector('.publication-abstract');
            
            if (abstractElement) {
                const abstractText = abstractElement.innerText;
                showModal();
                setLoadingState();
                getAiSummary(abstractText);
            } else {
                console.error("Could not find the abstract for this publication.");
                summaryContent.innerHTML = `<p class="text-red-500">Error: Could not find the abstract for this publication.</p>`;
            }
        }

        // Sets the loading state in the modal
        function setLoadingState() {
            summaryContent.innerHTML = `
                <div class="flex justify-center items-center py-8">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"></div>
                    <p class="ml-4 text-gray-600">Generating summary...</p>
                </div>
            `;
        }

        // Function to call the Gemini API
        async function getAiSummary(abstractText) {
            const prompt = `Summarize the following research abstract for a non-expert audience, highlighting its key contributions in 3 simple bullet points. Use clear, accessible language.

Abstract:
---
${abstractText}
---
Summary:
`;

            let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            const apiKey = ""; // Canvas provides this
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts.length > 0) {
                    const summaryText = result.candidates[0].content.parts[0].text;
                    // Basic formatting to convert markdown-like lists to HTML
                    const formattedSummary = summaryText
                        .replace(/\*\s?/g, '<li>') // Replace asterisks with list item tags
                        .replace(/\n/g, '</li>');    // Replace newlines with closing list item tags
                    summaryContent.innerHTML = `<ul class="list-disc list-inside space-y-2">${formattedSummary}</ul>`;
                } else {
                    throw new Error("Invalid response structure from API.");
                }
            } catch (error) {
                console.error("Error fetching AI summary:", error);
                summaryContent.innerHTML = `<p class="text-red-500">Sorry, there was an error generating the summary. Please try again later.</p>`;
            }
        }

    </script>

</body>
</html>
